var move_i = {'bnf6': 1, 'wnf3': 2, 'wd4': 3, 'wnc3': 4, 'we4': 5, 'bd5': 6, 'bo-o': 7, 'bnc6': 8, 'wo-o': 9, 'be6': 10, 'bc5': 11, 'bd6': 12, 'bg6': 13, 'wc4': 14, 'bbg7': 15, 'be5': 16, 'bc6': 17, 'wbd3': 18, 'we3': 19, 'bbe7': 20, 'wc3': 21, 'bcd4': 22, 'wg3': 23, 'wbg2': 24, 'bnbd7': 25, 'we5': 26, 'wh3': 27, 'wbe2': 28, 'wbf4': 29, 'ba6': 30, 'wbg5': 31, 'wbe3': 32, 'wd3': 33, 'wbc4': 34, 'bbd6': 35, 'bh6': 36, 'bbg4': 37, 'bnd7': 38, 'bb6': 39, 'wcd5': 40, 'bbb7': 41, 'bnd5': 42, 'wnd4': 43, 'wre1': 44, 'wne5': 45, 'wbb5': 46, 'wd5': 47, 'wnbd2': 48, 'wed5': 49, 'bbf5': 50, 'wh4': 51, 'bne4': 52, 'bbb4': 53, 'wb3': 54, 'bed5': 55, 'bre8': 56, 'wne4': 57, 'bb5': 58, 'wf4': 59, 'bbd7': 60, 'wbb2': 61, 'bbe6': 62, 'wqe2': 63, 'wf3': 64, 'bde4': 65, 'wqd2': 66, 'bf5': 67, 'wde5': 68, 'wa3': 69, 'bbc5': 70, 'bh5': 71, 'bne7': 72, 'wbc3': 73, 'wa4': 74, 'bqc7': 75, 'wnge2': 76, 'bne5': 77, 'wdc5': 78, 'wqc2': 79, 'bed4': 80, 'wnd2': 81, 'bde5': 82, 'bbc6': 83, 'wng3': 84, 'wg4': 85, 'wcd4': 86, 'bqe7': 87, 'wo-o-o': 88, 'wqd4': 89, 'wne2': 90, 'ba5': 91, 'bbf3': 92, 'bqb6': 93, 'bdc4': 94, 'bf6': 95, 'wqf3': 96, 'bqd5': 97, 'bnd4': 98, 'bnc3': 99, 'bbc3': 100, 'bnb6': 101, 'wbd2': 102, 'bqa5': 103, 'wh5': 104, 'bd4': 105, 'wnd5': 106, 'be4': 107, 'wbb3': 108, 'bnge7': 109, 'wbc6': 110, 'bcd5': 111, 'wqb3': 112, 'wng5': 113, 'wb4': 114, 'bna6': 115, 'wbf6': 116, 'bngf6': 117, 'wbg3': 118, 'wed4': 119, 'wbh4': 120, 'bbg6': 121, 'bg5': 122, 'bqd8': 123, 'bqd7': 124, 'bng4': 125, 'bnfd7': 126, 'wnb5': 127, 'wnh3': 128, 'bbf6': 129, 'bnc5': 130, 'bnh5': 131, 'bbh5': 132, 'bnh6': 133, 'wnc6': 134, 'wrc1': 135, 'bng6': 136, 'bnf5': 137, 'wqd3': 138, 'bh4': 139, 'wed6': 140, 'bqf6': 141, 'wnb3': 142, 'bqd6': 143, 'wqa4': 144, 'wg5': 145, 'wnf6': 146, 'bb4': 147, 'bba6': 148, 'brc8': 149, 'brb8': 150, 'wqd8': 151, 'wngf3': 152, 'bo-o-o': 153, 'wrd1': 154, 'bna5': 155, 'wde4': 156, 'wna3': 157, 'wnc4': 158, 'bqd1': 159, 'wbf3': 160, 'wrb1': 161, 'bbd3': 162, 'bnb4': 163, 'bef6': 164, 'bc4': 165, 'wbe4': 166, 'wdc6': 167, 'wfe5': 168, 'wef6': 169, 'wba4': 170, 'bef4': 171, 'wqg4': 172, 'bkd8': 173, 'wbh6': 174, 'wnf4': 175, 'wqf4': 176, 'bng8': 177, 'wkd1': 178, 'bne8': 179, 'wc5': 180, 'bnc7': 181, 'bgf6': 182, 'wnf2': 183, 'bbe4': 184, 'wnh4': 185, 'wqh5': 186, 'bfe4': 187, 'wbd4': 188, 'bfe6': 189, 'whg3': 190, 'brd8': 191, 'bbb6': 192, 'bbf8': 193, 'bhg6': 194, 'bcd6': 195, 'wbe7': 196, 'wqg3': 197, 'bkf8': 198, 'bnbc6': 199, 'wde6': 200, 'bnf3': 201, 'wef5': 202, 'wbc2': 203, 'wbe5': 204, 'bbe2': 205, 'wbd6': 206, 'bbe5': 207, 'bqc5': 208, 'wa5': 209, 'wh6': 210, 'bbh6': 211, 'whg6': 212, 'bbf4': 213, 'bfe5': 214, 'bkf7': 215, 'wqd5': 216, 'wnfd2': 217, 'bqc8': 218, 'wqd1': 219, 'wrg1': 220, 'bnb8': 221, 'bqe8': 222, 'bnf8': 223, 'bfg6': 224, 'wnf1': 225, 'wqc4': 226, 'bab5': 227, 'wba6': 228, 'wqe1': 229, 'wbd7': 230, 'wef4': 231, 'wqh4': 232, 'wbh2': 233, 'bdc5': 234, 'wqe4': 235, 'bdc3': 236, 'wnc2': 237, 'bbh3': 238, 'wna4': 239, 'wcb5': 240, 'bed6': 241, 'wgf3': 242, 'we6': 243, 'bbd2': 244, 'wb5': 245, 'bnd6': 246, 'bqd4': 247, 'bke7': 248, 'wng6': 249, 'bdc6': 250, 'bg4': 251, 'wab3': 252, 'wcd3': 253, 'wbf5': 254, 'bbh7': 255, 'wnce2': 256, 'ba4': 257, 'wkf2': 258, 'wnd6': 259, 'wnf5': 260, 'wqe3': 261, 'bhg3': 262, 'bnf7': 263, 'wba3': 264, 'bbd5': 265, 'bnd2': 266, 'bh3': 267, 'wqc3': 268, 'bef5': 269, 'bbg3': 270, 'bqh4': 271, 'wfe3': 272, 'bbc4': 273, 'wnd7': 274, 'wcd6': 275, 'wnbc3': 276, 'bde3': 277, 'wke2': 278, 'bef3': 279, 'wef3': 280, 'bba5': 281, 'wbc5': 282, 'brg8': 283, 'bkh8': 284, 'bne6': 285, 'wbd5': 286, 'bgh5': 287, 'bnf4': 288, 'bbb5': 289, 'bhg5': 290, 'bqe5': 291, 'wbg7': 292, 'bng3': 293, 'bbg5': 294, 'wbf7': 295, 'wbf1': 296, 'bqh5': 297, 'bqb2': 298, 'bba3': 299, 'wkf1': 300, 'bnd3': 301, 'bbd4': 302, 'bkg7': 303, 'wra3': 304, 'bke8': 305, 'wne1': 306, 'wbg6': 307, 'wkd2': 308, 'wf5': 309, 'wnd3': 310, 'bne3': 311, 'wnc7': 312, 'bgf5': 313, 'bkd7': 314, 'bqb4': 315, 'bab6': 316, 'bed3': 317, 'wndb5': 318, 'wne6': 319, 'bnce7': 320, 'wab5': 321, 'wnf7': 322, 'wdc3': 323, 'wbh3': 324, 'bbc7': 325, 'bf4': 326, 'wbe6': 327, 'bnc4': 328, 'bcb3': 329, 'wnb1': 330, 'bcb4': 331, 'wne3': 332, 'wqc1': 333, 'wnd1': 334, 'bqg5': 335, 'wfe4': 336, 'wkh1': 337, 'wqb7': 338, 'bqb3': 339, 'wng1': 340, 'wkg2': 341, 'bbc8': 342, 'bqg6': 343, 'bba7': 344, 'wrh5': 345, 'wgf4': 346, 'bqc6': 347, 'wnc5': 348, 'wke1': 349, 'wqa3': 350, 'bqc3': 351, 'bkh7': 352, 'wba2': 353, 'bbc1': 354, 'bbg2': 355, 'wd6': 356, 'wrg3': 357, 'bnge5': 358, 'whg5': 359, 'brf8': 360, 'whg4': 361, 'bab4': 362, 'bnb3': 363, 'wab4': 364, 'bqe6': 365, 'bbe3': 366, 'wkb1': 367, 'bgh6': 368, 'wqd6': 369, 'wqh6': 370, 'wkc2': 371, 'wbc1': 372, 'bnd8': 373, 'wqg7': 374, 'bng5': 375, 'bkg8': 376, 'bqe4': 377, 'wqe5': 378, 'bnbd5': 379, 'wbh7': 380, 'be3': 381, 'wne7': 382, 'bndf6': 383, 'bqf5': 384, 'wcb6': 385, 'bqa6': 386, 'wgf5': 387, 'brh1': 388, 'wbh1': 389, 'bnh7': 390, 'wna8': 391, 'bcb5': 392, 'bnde5': 393, 'wqf6': 394, 'wqe7': 395, 'wrh3': 396, 'bqb8': 397, 'bd3': 398, 'bqb5': 399, 'wneg5': 400, 'wqh3': 401, 'wdc4': 402, 'bbc2': 403, 'wqb6': 404, 'bra7': 405, 'bbh8': 406, 'bnf2': 407, 'bhg4': 408, 'bqa3': 409, 'wbc7': 410, 'wrh8': 411, 'wke3': 412, 'wbb7': 413, 'brf7': 414, 'bnh4': 415, 'ba3': 416, 'bbf1': 417, 'bnce4': 418, 'bcd3': 419, 'wg6': 420, 'wbd8': 421, 'bkc7': 422, 'wnb6': 423, 'wef7': 424, 'wqb5': 425, 'wra2': 426, 'wrf3': 427, 'bgf4': 428, 'bbd8': 429, 'wgf6': 430, 'bqf7': 431, 'bbf2': 432, 'wnb4': 433, 'wra8': 434, 'bqd2': 435, 'bbb2': 436, 'wng2': 437, 'wnge4': 438, 'bn8d7': 439, 'wnh5': 440, 'bned7': 441, 'wfe6': 442, 'bbd1': 443, 'bke6': 444, 'wnde4': 445, 'bbf7': 446, 'wcb4': 447, 'bnec6': 448, 'wqg5': 449, 'wqc6': 450, 'bqg4': 451, 'bng7': 452, 'wbf2': 453, 'wqf2': 454, 'bbh4': 455, 'bba4': 456, 'bnc2': 457, 'wfg3': 458, 'wkg1': 459, 'bra6': 460, 'bn6d7': 461, 'wbg4': 462, 'wnde2': 463, 'wrfd1': 464, 'wrhe1': 465, 'wkd3': 466, 'wned4': 467, 'bqf3': 468, 'bnb5': 469, 'wgh3': 470, 'bne2': 471, 'bbb3': 472, 'bn7f6': 473, 'bba8': 474, 'wng4': 475, 'wfg7': 476, 'wbb8': 477, 'brh8': 478, 'wgh5': 479, 'bqa8': 480, 'wqb1': 481, 'bnce5': 482, 'bkd6': 483, 'wgh6': 484, 'bb3': 485, 'wra4': 486, 'wba8': 487, 'bba1': 488, 'bfg5': 489, 'wa6': 490, 'wndf3': 491, 'wnbd4': 492, 'wnce4': 493, 'bqe2': 494, 'bqg2': 495, 'bbb1': 496, 'wn2f3': 497, 'brh6': 498, 'wkc3': 499, 'brh7': 500, 'bra8': 501, 'brg6': 502, 'wrf1': 503, 'wbh5': 504, 'bnfd4': 505, 'bc3': 506, 'wrb7': 507, 'wnh8': 508, 'wng7': 509, 'wde7': 510, 'wnce5': 511, 'wrad1': 512, 'wn5c3': 513, 'bkc8': 514, 'wn1c3': 515, 'wqa1': 516, 'bqh6': 517, 'bcb2': 518, 'bgh4': 519, 'brh4': 520, 'bqc4': 521, 'bde6': 522, 'brh3': 523, 'bfg4': 524, 'wqf7': 525, 'bfg3': 526, 'wkg3': 527, 'wnh2': 528, 'wqh8': 529, 'brd6': 530, 'wre2': 531, 'wn1d2': 532, 'wrh6': 533, 'wqf5': 534, 'bneg4': 535, 'wqb4': 536, 'bkg6': 537, 'bnhf6': 538, 'bqf4': 539, 'wgh4': 540, 'bnfd5': 541, 'wrb3': 542, 'wbb4': 543, 'bn5f6': 544, 'bqa2': 545, 'wnd8': 546, 'wkc1': 547, 'wrh1': 548, 'wrd2': 549, 'bndb4': 550, 'wbb1': 551, 'wre4': 552, 'wqe6': 553, 'wrfe1': 554, 'wrh4': 555, 'bbe8': 556, 'bqh1': 557, 'wqh2': 558, 'wbd1': 559, 'wdc7': 560, 'wqa7': 561, 'bn4c6': 562, 'bfe3': 563, 'wed3': 564, 'wkh2': 565, 'bna4': 566, 'bre1': 567, 'bnc8': 568, 'wqg6': 569, 'wcb3': 570, 'bqh3': 571, 'bkc6': 572, 'wre5': 573, 'wbf8': 574, 'wqh7': 575, 'wbh8': 576, 'bbb8': 577, 'wqa8': 578, 'bqd3': 579, 'wba1': 580, 'bgh3': 581, 'wbc8': 582, 'wbb6': 583, 'brf6': 584, 'bgf3': 585, 'wned2': 586, 'wab6': 587, 'bkb8': 588, 'bqf8': 589, 'brb6': 590, 'wrg2': 591, 'wqa6': 592, 'brh5': 593, 'wqd7': 594, 'bqh8': 595, 'bqg3': 596, 'wnc1': 597, 'bnfe4': 598, 'bnd1': 599, 'wcb7': 600, 'wqf1': 601, 'bra1': 602, 'wkb3': 603, 'wfg6': 604, 'bqg7': 605, 'wba5': 606, 'bnef6': 607, 'wrd4': 608, 'bncd7': 609, 'wre3': 610, 'bqh2': 611, 'bre5': 612, 'bhg2': 613, 'wde3': 614, 'bkc5': 615, 'bcb6': 616, 'wfg4': 617, 'wnc8': 618, 'wc6': 619, 'wrh7': 620, 'wra1': 621, 'wna5': 622, 'wfg5': 623, 'wrg7': 624, 'wn1e2': 625, 'bqa1': 626, 'bbh2': 627, 'wnfd4': 628, 'wnh7': 629, 'bbg1': 630, 'bndc5': 631, 'bn8e7': 632, 'wgh7': 633, 'bna7': 634, 'bqb7': 635, 'bbh1': 636, 'bqf2': 637, 'wkf3': 638, 'wqb2': 639, 'whg7': 640, 'wqc5': 641, 'wnfg5': 642, 'wfe7': 643, 'bnfg4': 644, 'wrc3': 645, 'bgf2': 646, 'wb6': 647, 'bfg2': 648, 'bef2': 649, 'wnec3': 650, 'wrd5': 651, 'brfe8': 652, 'brd7': 653, 'wba7': 654, 'bqa4': 655, 'bnce8': 656, 'bdc2': 657, 'wnh1': 658, 'bre3': 659, 'wgf7': 660, 'wnef7': 661, 'bkb6': 662, 'wrf2': 663, 'bnfe8': 664, 'wrf4': 665, 'wnfh5': 666, 'bnh8': 667, 'wngf7': 668, 'brg4': 669, 'bre4': 670, 'bn4a6': 671, 'wn3d2': 672, 'wqa5': 673, 'bre6': 674, 'wrac1': 675, 'wbg1': 676, 'brb2': 677, 'brc6': 678, 'bkf6': 679, 'bqe3': 680, 'bnb7': 681, 'bra3': 682, 'bc2': 683, 'wkb4': 684, 'wrg5': 685, 'wre8': 686, 'bn6e7': 687, 'wndf5': 688, 'bab3': 689, 'brg3': 690, 'wna7': 691, 'wnef3': 692, 'bqc2': 693, 'bnec5': 694, 'bcd2': 695, 'wn2g3': 696, 'wed7': 697, 'brac8': 698, 'wnfd5': 699, 'wrh2': 700, 'bnh1': 701, 'brd1': 702, 'wrd8': 703, 'wn1f3': 704, 'bn5b6': 705, 'bg3': 706, 'wka5': 707, 'wka4': 708, 'bn8c6': 709, 'bf3': 710, 'wn5e4': 711, 'bre7': 712, 'wnfe5': 713, 'bra5': 714, 'wkh3': 715, 'bna1': 716, 'wab7': 717, 'wrg4': 718, 'bkf5': 719, 'bnfe7': 720, 'bndb8': 721, 'bke5': 722, 'wncd5': 723, 'wra6': 724, 'bkg5': 725, 'wn5f3': 726, 'wqc8': 727, 'wrb4': 728, 'wnhf3': 729, 'bn7b6': 730, 'wqg8': 731, 'bnde7': 732, 'wncd2': 733, 'wrhf1': 734, 'wna2': 735, 'brad8': 736, 'bqb1': 737, 'wrab1': 738, 'bnbd4': 739, 'bnhf5': 740, 'bnc1': 741, 'wra5': 742, 'bde2': 743, 'wqg2': 744, 'wqc7': 745, 'bn7c6': 746, 'wcd7': 747, 'bqg8': 748, 'wrc2': 749, 'wrhh3': 750, 'brc7': 751, 'bncd5': 752, 'bng2': 753, 'wn4f3': 754, 'wkd4': 755, 'wkb2': 756, 'bqc1': 757, 'brd4': 758, 'bncb8': 759, 'bna2': 760, 'wre6': 761, 'bkh5': 762, 'bra2': 763, 'brg2': 764, 'brfd8': 765, 'wrb5': 766, 'brf5': 767, 'bn5c6': 768, 'bab2': 769, 'wnac4': 770, 'bkd5': 771, 'wrd3': 772, 'wqf8': 773, 'wnab1': 774, 'wbg8': 775, 'wbe1': 776, 'bqe1': 777, 'wkh4': 778, 'bed2': 779, 'wn5d4': 780, 'wnb2': 781, 'bn7g6': 782, 'brfc8': 783, 'wa7': 784, 'bba2': 785, 'wn4c3': 786, 'wnec6': 787, 'wn2c3': 788, 'bnba6': 789, 'wncb1': 790, 'wrfc1': 791, 'bnb1': 792, 'brg5': 793, 'wb7': 794, 'whg8=q': 795, 'brgh6': 796, 'wrde1': 797, 'wnfg1': 798, 'wrd6': 799, 'wrc7': 800, 'wka1': 801, 'wnbc7': 802, 'wrhh2': 803, 'wh7': 804, 'wn3d5': 805, 'wkc4': 806, 'bneg8': 807, 'wf7': 808, 'wna1': 809, 'bna8': 810, 'wnac5': 811, 'wrg6': 812, 'wneg1': 813, 'bnca6': 814, 'wrah4': 815, 'wr4h2': 816, 'brae8': 817, 'bqf1': 818, 'we7': 819, 'wn2b3': 820, 'wncb5': 821, 'bna3': 822, 'bndc7': 823, 'bka5': 824, 'wn5h3': 825, 'bnac5': 826, 'wc7': 827, 'wg7': 828, 'wgh8=q': 829, 'wnhf2': 830, 'wnb8': 831, 'bn8h7': 832, 'bqh7': 833, 'wka3': 834, 'bned5': 835, 'bnf1': 836, 'brhh6': 837, 'brhg6': 838, 'bn8a6': 839, 'bgh2': 840, 'bka7': 841, 'bnhg8': 842, 'bre2': 843, 'bnac4': 844, 'wrae1': 845, 'wd7': 846, 'wn5a3': 847, 'wnf8': 848, 'wre7': 849, 'wncd4': 850, 'bn4h5': 851, 'wqa2': 852, 'brf3': 853, 'wndb1': 854, 'bba1=q': 855, 'bra4': 856, 'wqe8': 857, 'wra7': 858, 'bf2': 859, 'wngh3': 860, 'brb4': 861, 'brb3': 862, 'wed8=q': 863, 'bg2': 864, 'brg7': 865, 'wnh6': 866, 'bcd1=q': 867, 'bnde4': 868, 'brd3': 869, 'bnh2': 870, 'wnfe4': 871}

function predictPGN(inputPGN) {
  let indices = new Array(20).fill(0)
  for(var i=0, n= Math.min(20,inputPGN.length);i<n;i++) {
    if (i%2 === 0){
      thismove = 'w' + inputPGN[i].toLowerCase().replace('x','').replace('+','')
    }else {
      thismove = 'b' + inputPGN[i].toLowerCase().replace('x','').replace('+','')
    }
    j = move_i[thismove]
    indices[i] = j
    console.log(i,inputPGN[i],j,indices)
  }
  let onehotseqs = tf.oneHot(indices,872).reshape([1, 20, 872])
  var prediction = model.predict(onehotseqs).dataSync()
  console.log(prediction)
  var myTable = document.getElementById('predtable');
  for(var i=0, n= 8;i<n;i++) {
  myTable.rows[i+1].cells[1].innerHTML = Math.round(prediction[i]*1000)/10;
}
}
